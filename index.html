<!doctype html><html lang="fr"><head><meta charset="utf-8"><style type="text/css">*{margin:0;padding:0}*,::after,::before{box-sizing:border-box}body,html{height:100%}body{background:#000}body.phase-text #iphone-keyboard-wrapper{transform:translateY(0)}body.phase-text #text-overlay{display:block}body.pause #text-overlay{display:block}body.pause #text{font-size:26px;line-height:1.3}body.phase-compass #compass{display:block}body.phase-compass #sb{display:none}b{color:#ff0}#wrapper{position:absolute;top:calc(50% - 500px);left:calc(50% - 700px);width:1400px;height:1000px}#game{width:1000px;height:1000px;background:#000;animation:shake 20s;animation-iteration-count:infinite}#game.moving{animation-duration:3s}#game.sprinting{animation-duration:1s}@keyframes shake{0%{transform:translate(1px,1px) rotate(0)}10%{transform:translate(-1px,0) rotate(-.1deg)}20%{transform:translate(0,0) rotate(.1deg)}30%{transform:translate(0,1px) rotate(0)}40%{transform:translate(1px,-1px) rotate(.1deg)}50%{transform:translate(-1px,1px) rotate(-.1deg)}60%{transform:translate(0,1px) rotate(0)}70%{transform:translate(0,1px) rotate(-.1deg)}80%{transform:translate(-1px,-1px) rotate(.1deg)}90%{transform:translate(1px,-1px) rotate(0)}100%{transform:translate(1px,1px) rotate(-.1deg)}}#phone{display:inline-block;position:absolute;top:150px;right:0;width:296px;height:614px;padding:73px 17px;border-radius:39px;background:#464646;box-shadow:inset 0 0 3px 0 rgba(0,0,0,.7)}#phone:before{width:calc(100% - 8px);height:calc(100% - 8px);position:absolute;top:4px;content:'';left:4px;border-radius:35px;background:#080808;z-index:1}#phone:after{width:calc(100% - 12px);height:calc(100% - 12px);position:absolute;top:6px;content:'';left:6px;border-radius:34px;box-shadow:inset 0 0 3px 0 rgba(0,0,0,.1),inset 0 0 6px 3px #212121;z-index:2}#phone-screen{width:100%;position:relative;height:100%;z-index:3;background:#fff;overflow:hidden;display:block;border-radius:1px;background:#222}#pbb,#ptb{height:2px;background:#000;width:100%;display:block}#ph{border-radius:100%;width:47px;height:47px;position:absolute;left:50%;margin-left:-24px;bottom:15px;z-index:3;background:#080808;background:linear-gradient(135deg,#080808 0,#464646 50%,#080808 100%)}#ph:before{background:#080808;position:absolute;content:'';border-radius:100%;width:calc(100% - 6px);height:calc(100% - 6px);top:3px;left:3px}#ptb{height:10px;background:#212121;position:absolute;top:47px;left:0}#pbb{height:10px;background:#212121;position:absolute;bottom:47px;left:0}#ps{position:absolute;top:133px;right:-3px;width:3px;height:46px;border-radius:0 2px 2px 0;background:#464646}#pv{position:absolute;left:-3px;top:131px;z-index:0;height:46px;width:3px;border-radius:2px 0 0 2px;background:#464646}#pv:before{position:absolute;left:2px;top:-55px;height:28px;width:2px;border-radius:2px 0 0 2px;background:inherit;content:'';display:block}#pv:after{position:absolute;left:0;top:57px;height:46px;width:3px;border-radius:2px 0 0 2px;background:inherit;content:'';display:block}#phone-flash{background:#080808;width:8px;height:8px;position:absolute;top:17px;left:50%;margin-left:-4px;border-radius:100%;z-index:3}#phone-sensor{background:#3c3d3d;width:11px;height:11px;position:absolute;top:34px;left:94px;z-index:3;border-radius:100%}#phone-speaker{background:#292728;width:49px;height:4px;position:absolute;top:38px;left:calc(50% - 25px);border-radius:4px;z-index:3}.phone-app{position:relative;display:inline-block;vertical-align:top;width:27.3333%;margin:3%;padding-top:27.3333%;background:#ccc;border-radius:5%}.phi{position:absolute;top:20px;left:30px;background-color:#c44;display:inline-block;height:20px;transform:rotate(-45deg);width:20px}.phi::after,.phi::before{content:"";background-color:#c44;border-radius:50%;height:20px;position:absolute;width:20px}.phi::before{top:-10px;left:0}.phi::after{left:10px;top:0}#phone-camera{background:#a93}#pci{position:absolute;display:block;top:20px;left:20%;width:60%;height:40%;background-color:#000;border-radius:5px}#pci::after{content:"";display:block;width:22px;height:22px;border:4px solid #a93;position:absolute;top:10%;left:calc(50% - 11px);background-color:#000;border-radius:50%}#pci::before{content:"";display:block;width:50%;height:7px;position:absolute;top:-16%;left:25%;background-color:#000;border-radius:10px}#phone-light{background:#19c}#phone-light-icon{position:absolute;display:block;top:15px;left:33px;width:10px;height:42px;background-image:linear-gradient(to bottom,#000 38px,rgba(0,0,0,0) 38px,rgba(0,0,0,0) 40px,#000 40px,#000 42px)}#phone-light-icon::before{content:'';height:7px;display:block;position:relative;left:-8px;top:-8px;border-top:28px solid #000;border-right:13px solid transparent;border-left:13px solid transparent}#phone-light-icon::after{content:'';display:block}#phone-sound{background:#e86}.psi{position:absolute;top:0;left:0;right:0;text-align:center;font-size:50px;line-height:66px}#compass{display:none;position:absolute;bottom:61px;left:61px;width:140px;height:140px;border-radius:50%;margin:0 auto;border:10px solid #333;background:#000;box-shadow:0 0 3px #000,0 0 1px 7px #222}#compass::after,#compass::before{content:'';position:absolute;border-radius:50%}#compass::before{border:2px dashed #444;left:7px;right:7px;bottom:7px;top:7px}#compass::after{left:-7px;right:-7px;bottom:-7px;top:-7px;background:linear-gradient(-45deg,rgba(255,255,255,.2) 0,rgba(255,255,255,.05) 47%,rgba(255,255,255,0) 48%,rgba(255,255,255,0) 100%)}#compass span{position:absolute;font-size:10px;font-weight:700;color:#666}#compass span:nth-child(1){top:14px;left:57px}#compass span:nth-child(3){bottom:14px;left:57px}#compass span:nth-child(2){top:57px;right:20px}#compass span:nth-child(4){top:57px;left:20px}@keyframes compass-rotate{from{transform:rotate(-15deg)}to{transform:rotate(15deg)}}#compass-pointer-wrapper{position:relative;width:42px;height:21px;left:calc(50% - 21px);top:calc(50% - 12px);transform:rotate(-104deg)}#compass-pointer{position:relative;width:42px;height:21px;left:calc(50% - 21px);top:calc(50% - 12px);animation:compass-rotate 4s cubic-bezier(.7,0,.3,1) infinite alternate}#compass-pointer::before{content:'';position:absolute;left:0;right:0;top:0;bottom:0;background:linear-gradient(-63deg,#4fbcf2 1%,#1a6ece 50%,#d8d8d8 51%,#f45e50 53%,#ff2d2d 100%);transform:skewX(60deg)}#compass-pointer::after{content:'';width:7px;height:7px;background:#4781c0;border-radius:50%;box-shadow:inset 0 0 4px 2px #4d4d4d,0 0 5px 1px #fff;position:absolute;left:calc(50% - 3.5px);top:calc(50% - 3.5px)}#sb{position:absolute;bottom:99px;left:calc(50% - 75px);height:85px;width:150px}#sb p{width:12%;margin:0 2%;display:inline-block;background-color:#fafafa;border:1px solid #f3f3f3}#sb-1{height:20%}#sb-2{height:40%}#sb-3{height:60%}#sb-4{height:80%}#sb-5{height:99%}#sb[data-level="1"] p:first-child{background-color:#e74c3c;border:thin solid #a82315}#sb[data-level="2"] p:nth-child(-n+2){background-color:#e74c3c;border:thin solid #a82315}#sb[data-level="3"] p:nth-child(-n+3){background-color:#f1c40f;border:thin solid #d0a90c}#sb[data-level="4"] p:nth-child(-n+4){background-color:#f1c40f;border:thin solid #d0a90c}#sb[data-level="5"] p{background-color:#16a085;border:thin solid #12816b}.ok .bar{background-color:#f1c40f;border:thin solid #d0a90c}#iphone-keyboard-wrapper{position:absolute;bottom:0;left:0;right:0;transform:translateY(100%);transition:transform .3s ease}#iphone-keyboard{border-top:1px solid #3a3d42;background-image:linear-gradient(to bottom,#9098a3,#454f5d);padding:2% 0 1%}#iphone-keyboard li{text-align:center;list-style:none;padding:1% 2%}#iphone-keyboard button{display:inline-block;width:8.5%;margin:0 .25%;padding:3% 0;color:#000;font-weight:700;font-size:16px;font-family:sans-serif;color:#3a3d42;text-decoration:none;text-align:center;text-shadow:0 1px 1px #fff;border:0;border-top:1px solid rgba(255,255,255,.45);background:#ecedef;background-image:linear-gradient(to bottom,#f8f8f9,#dddfe1);border-radius:3px;box-shadow:0 1px 3px rgba(0,0,0,.7),0 1px 0 rgba(0,0,0,.3)}#iphone-keyboard button.active,#iphone-keyboard button:active{background-image:linear-gradient(to bottom,#e2e3e4,#aaadb4)}#iphone-keyboard .space{margin-top:2%;width:65%;padding:2% 0}#text-overlay{position:absolute;top:0;left:0;width:1000px;height:1000px;background:rgba(0,0,0,.8);display:none;font-family:sans-serif}#text-overlay::after{content:'Press Enter to continue';position:absolute;bottom:200px;right:0;font-size:20px;color:#fff}.text{padding-top:300px;font-size:40px;text-align:center;letter-spacing:3px;color:#fff}.text span{display:inline-block;vertical-align:baseline;transition:all .4s ease}.text span.current{border-bottom:2px solid #ff0}.text span.checked{opacity:0;transform:translateY(-100px)}#countdown{background:#000;color:#fff;font-size:27px;padding:7px 0;margin-bottom:-1px;text-align:center;font-family:sans-serif}#countdown span{display:inline-block;vertical-align:middle;margin:0 7px;width:43px;text-align:right;font-size:42px}progress{position:absolute;bottom:4px;left:calc(50% - 25px);height:6px;background:#444;border-radius:3px;width:50px}progress::-webkit-progress-bar{border-radius:3px;background:#777}progress::-webkit-progress-value{border-radius:3px;background:#161}progress.off::-webkit-progress-value{background:#611}</style></head><body><div id="wrapper"><canvas id="game" width="1000" height="1000"></canvas><div id="phone"><div id="ptb"></div><div id="ps"></div><div id="pv"></div><div id="phone-flash"></div><div id="phone-sensor"></div><div id="phone-speaker"></div><div id="phone-screen"><div class="phone-app" id="phone-health"><p class="phi"></p><progress min="0" max="100" value="100"></progress></div><div id="phone-light" class="phone-app"><p id="phone-light-icon"></p><progress min="0" max="100" value="100"></progress></div><div class="phone-app" id="phone-camera"><p id="pci"></p><progress min="0" max="100" value="100"></progress></div><!-- div id="phone-sound" class="phone-app">
                    <p class="psi">â™«</p>
                </div--><div id="compass"><span>N</span> <span>E</span> <span>S</span> <span>W</span><div id="compass-pointer-wrapper"><p id="compass-pointer"></p></div></div><div id="sb" data-level="1"><p id="sb-1"></p><p id="sb-2"></p><p id="sb-3"></p><p id="sb-4"></p><p id="sb-5"></p></div><div id="iphone-keyboard-wrapper"><p id="countdown"></p><ul id="iphone-keyboard"></ul></div></div><div id="ph"></div><div id="pbb"></div></div><div id="text-overlay"><p id="text" class="text"></p></div></div><script>!function(){"use strict";var t,e,a,n,o,r,i,s,y,l=function(t){return document.getElementById(t)},h=l("wrapper"),x=l("game"),c=l("sb"),d=l("compass-pointer-wrapper"),f=l("phone-light").querySelector("progress"),u=l("phone-health").querySelector("progress"),m=l("phone-camera").querySelector("progress"),v=x.getContext("2d"),g=0;new Date;const p="#eee",b="#666",w=250;var M=x.width/2,I=x.height/2;const k=0;var P,S,L,C,q,A,T,E=0,D=1,R=1,F={x:500,y:250},H=!1,O=!1,W=!1,$=!1,z=!1,K=!1,G=0,N=0,U=+new Date,B=0,Q=0,Y=0;const Z=3e4,J=1.5,V=3.5,X=2,j=100,_=180,tt=60,et=40,at=60,nt=90,ot=45,rt=200,it=600,st=400;var yt,lt=["Hello from the other side","I must have called a thousand times","I'll send an SOS to the world","I hope that someone gets my...","Lorem ipsum dolor sit amet,","Hello darkness, my old friend","I've come to talk with you again","I'm still standing yeah yeah yeah","Freedom"],ht=[[{x:0,y:0},{x:1e3,y:0},{x:1e3,y:1e3},{x:0,y:1e3},{x:0,y:0}],[{x:0,y:100},{x:75,y:100}],[{x:125,y:100},{x:225,y:100}],[{x:200,y:0},{x:200,y:100}],[{x:275,y:100},{x:350,y:100}],[{x:350,y:0},{x:350,y:450},{x:600,y:450},{x:600,y:500},{x:800,y:500},{x:800,y:525}],[{x:350,y:350},{x:100,y:350},{x:100,y:600},{x:225,y:600}],[{x:225,y:700},{x:100,y:700},{x:100,y:900},{x:525,y:900}],[{x:575,y:900},{x:650,y:900}],[{x:650,y:1e3},{x:650,y:775}],[{x:650,y:725},{x:650,y:700}],[{x:275,y:700},{x:775,y:700}],[{x:825,y:700},{x:900,y:700}],[{x:0,y:400},{x:25,y:400}],[{x:75,y:400},{x:100,y:400}],[{x:0,y:800},{x:25,y:800}],[{x:75,y:800},{x:100,y:800}],[{x:275,y:600},{x:525,y:600}],[{x:575,y:600},{x:800,y:600},{x:800,y:575}],[{x:350,y:600},{x:350,y:550}],[{x:350,y:500},{x:350,y:450}],[{x:500,y:450},{x:500,y:600}],[{x:450,y:325},{x:450,y:100},{x:800,y:100},{x:800,y:175}],[{x:450,y:375},{x:450,y:400},{x:625,y:400}],[{x:675,y:400},{x:700,y:400},{x:700,y:300},{x:800,y:300}],[{x:800,y:225},{x:800,y:500}],[{x:900,y:0},{x:900,y:50}],[{x:600,y:100},{x:600,y:225}],[{x:600,y:275},{x:600,y:400}],[{x:900,y:100},{x:900,y:225}],[{x:900,y:175},{x:1e3,y:175}],[{x:900,y:500},{x:1e3,y:500}],[{x:900,y:275},{x:900,y:575}],[{x:900,y:625},{x:900,y:900},{x:700,y:900}],[{x:200,y:400},{x:250,y:400},{x:250,y:500},{x:200,y:500},{x:200,y:400}],[{x:100,y:200},{x:250,y:200},{x:250,y:225},{x:100,y:225},{x:100,y:200}],[{x:400,y:900},{x:400,y:775},{x:450,y:775},{x:450,y:900}]],xt={x:970,y:920,w:50,h:75};function ct(){var t=1400/window.innerWidth,e=1020/window.innerHeight,a=Math.min(1.2,1/Math.max(t,e));h.style.webkitTransform=h.style.transform="scale("+a+")"}function dt(){ht.push([{x:xt.x-xt.w/2,y:xt.y},{x:xt.x-xt.w/2,y:xt.y+xt.h},{x:xt.x+xt.w/2,y:xt.y+xt.h},{x:xt.x+xt.w/2,y:xt.y}]),(yt=document.createElement("canvas")).width=1e3,yt.height=1e3;var t,e=yt.getContext("2d");t=e,ht.forEach(e=>{t.strokeStyle=b,t.lineWidth=6,e.forEach((a,n)=>{0===n?(t.beginPath(),t.moveTo(a.x,+a.y)):t.lineTo(a.x,+a.y),n===e.length-1&&t.stroke()})}),function(t){for(var e=xt.x-xt.w/2,a=xt.y,n=0;n<=4;++n){var o=t.createLinearGradient(e,a+15*n,e,a+15*(n+1));o.addColorStop(0,"black"),o.addColorStop(1,"white"),t.fillStyle=o,t.fillRect(e,a+15*n,50,15)}}(e)}function ft(){v.drawImage(yt,M+a,I+n)}function ut(t){for(var e=0;e<t.length;e+=4)if(102===t[e]&&102===t[e+1]&&102===t[e+2])return!0;return!1}function mt(t,e){var a=t[0].x,n=t[0].y,o=t[1].x-t[0].x,r=t[1].y-t[0].y,i=e[0].x,s=e[0].y,y=e[1].x-e[0].x,l=e[1].y-e[0].y,h=Math.sqrt(o*o+r*r),x=Math.sqrt(y*y+l*l);if(o/h==y/x&&r/h==l/x)return null;var c=(o*(s-n)+r*(a-i))/(y*r-l*o),d=(i+y*c-a)/o;return d<0?null:c<0||c>1?null:{x:a+o*d,y:n+r*d,param:d}}CanvasRenderingContext2D.prototype.roundRect=function(t,e,a,n,o){return a<2*o&&(o=a/2),n<2*o&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+a,e,t+a,e+n,o),this.arcTo(t+a,e+n,t,e+n,o),this.arcTo(t,e+n,t,e,o),this.arcTo(t,e,t+a,e,o),this.closePath(),this};const vt=700;function gt(t,e){var o=[],s=[];ht.forEach(t=>{t.forEach(t=>{s.indexOf(t.x+"-"+t.y)<0&&t.x+vt>r-a&&t.x-vt<r-a&&t.y+vt>i-n&&t.y-vt<i-n&&(s.push(t.x+"-"+t.y),o.push(t))})});for(var y=[],l=0;l<o.length;++l){var h=o[l],x=Math.atan2(h.y-e,h.x-t);h.angle=x,y.push(x-1e-5,x,x+1e-5)}var c=[];for(l=0;l<y.length;++l){x=y[l];var d,f=[{x:t,y:e},{x:t+Math.cos(x),y:e+Math.sin(x)}],u=null;Math.max(0,r-a-vt),Math.min(1e3,r-a+vt),Math.max(0,i-n-vt),Math.min(1e3,i-n+vt);ht.forEach(t=>{for(var e=0;e<t.length-1;++e)if(0,(d=[t[e],t[e+1]])[0].x+vt>r-a&&d[0].x-vt<r-a&&d[0].y+vt>i-n&&d[0].y-vt<i-n||d[1].x+vt>r-a&&d[1].x-vt<r-a&&d[1].y+vt>i-n&&d[1].y-vt<i-n){var o=mt(f,d);if(!o)continue;(!u||o.param<u.param)&&(u=o)}}),u&&(u.angle=x,c.push(u))}return c=c.sort(function(t,e){return t.angle-e.angle})}var pt,bt;function wt(t,e,o){e.fillStyle=o,e.beginPath(),e.moveTo(M+a+t[0].x,I+n+t[0].y);for(var r=1;r<t.length;++r){var i=t[r];e.lineTo(M+a+i.x,I+n+i.y)}e.fill()}function Mt(){for(var t=lt[E],e="",a=0;a<t.length;++a){var n=" "===t.charAt(a)?"&nbsp;":t.charAt(a);e+=`<span${0===a?' class="current"':""} data-val="${t.charAt(a)}">${n}</span>`}l("text").innerHTML=e}function It(){++D,At()}function kt(){var t;document.body.classList.add("phase-text"),Mt(),t=+new Date,P=setInterval(function(){var e=Math.max(0,Z-U+t),a=Math.floor(e/1e3%100),n=Math.floor(e/10%100);l("countdown").innerHTML="<span>00</span>:<span>"+("0"+a).substr(-2)+"</span>:<span>"+("0"+n).substr(-2)+"</span>",e<=0&&(clearInterval(P),It())},10)}function Pt(){v.save(),t.forEach(t=>{var e=Math.sqrt(Math.pow(n+t.y-i-N,2)+Math.pow(a+t.x-r-G,2)),o=Math.sqrt(Math.pow(n+t.y-i,2)+Math.pow(a+t.x-r,2)),s=q?st:H?_:j;if(o<20)qt();else{if(e<s-5){if(!q&&(t.v||(t.v=+new Date+1e3),U>=t.v)){var y=Math.atan2(n+t.y-i,a+t.x-r);t.x-=X*Math.cos(y),t.y-=X*Math.sin(y)}t.s||(t.s=!0),v.beginPath(),v.fillStyle="#600",v.arc(M+a+t.x,I+n+t.y,8,0,2*Math.PI,!1),v.fill()}t.s&&(v.beginPath(),v.fillStyle="#fff",v.arc(M+a+t.x+2,I+n+t.y,1,0,2*Math.PI,!1),v.arc(M+a+t.x-2,I+n+t.y,1,0,2*Math.PI,!1),v.fill())}}),v.restore()}function St(){100===T&&(q=!0,A=0,m.classList.add("off"),m.value=0,T=0)}function Lt(){Q=W?-1:$?1:0,Y=z?-1:K?1:0,v.clearRect(0,0,x.width,x.height),v.fillStyle="#000",v.fillRect(0,0,x.width,x.height);var t,e,l,[h,b]=function(){var t=Q*(o?V:J),e=Y*(o?V:J);ft();var a=M+r-11,n=I+i-11,s=v.getImageData(a+t,n+e,22,22).data;if(ut(s)){if(0!==Q)do{t-=Q,s=v.getImageData(a+t,n,22,22).data}while(ut(s)&&t*Q>0);if(0!==Y)do{e-=Y,s=v.getImageData(a,n+e,22,22).data}while(ut(s))}return[t,e]}(),P=B/30;0!==Q?(Q>0&&r<w||Q<0&&r>-w?r+=h:a-=h,G=Math.min(20,Math.max(G+P*Q,-20))):G=G>0?Math.max(0,G-P):Math.min(0,G+P),0!==Y?(Y>0&&i<w||Y<0&&i>-w?i+=b:n-=b,N=Math.min(20,Math.max(N+P*Y,-20))):N=N>0?Math.max(0,N-P):Math.min(0,N+P),T<100&&(T=Math.min(100,T+B/rt),m.value=T,100===T&&m.classList.remove("off")),function(){0;var t=[gt(r-a+G/8,i-n+N/8)];if(H)var e=10;else e=7;for(var o=0;o<2*Math.PI;o+=2*Math.PI/10){var s=Math.cos(o)*e,y=Math.sin(o)*e;t.push(gt(r-a+G/8+s,i-n+N/8+y))}for(var l=1;l<t.length;++l)wt(t[l],v,"rgba(255,255,255,0.08)");wt(t[0],v,p)}(),ft(),v.globalCompositeOperation="source-over",function(){var t=M+r,e=I+i;0!==Q||0!==Y?(g+=B,s=-90*Q,0!==Y&&(0===s?s=-90*Y+90:s+=45*Y*Q)):g=0;var a=5*Math.sin(Math.floor(g/(o?50:150)));o?(L=Math.max(0,L-B/at))<=0&&(u.classList.add("off"),o=!1,C=!1):(L=Math.min(100,L+B/nt),!C&&L>ot&&(u.classList.remove("off"),C=!0)),u.value=L,v.save(),v.translate(t,e),v.rotate(s*Math.PI/180),v.rotate(a*Math.PI/180),v.fillStyle="#444",v.roundRect(-15,-6,30,12,20).fill(),v.rotate(-a*Math.PI/180),v.drawImage(y,-25,-25),v.restore()}(),q?(A+=B)>it&&(q=!1):function(){var t=document.createElement("canvas");t.width=x.width,t.height=x.height;var e=t.getContext("2d");if(H){var a=_,n=.8;(S=Math.max(0,S-B/tt))<=0&&(H=!1)}else a=j,n=.6,S=Math.min(100,S+B/et);f.value=S;var o=k;e.fillStyle="rgba(0, 0, 0, "+(1-o/100)+")",e.fillRect(0,0,x.width,x.height);var s=M+r,y=I+i,l=e.createRadialGradient(s+G,y+N,0,s+G,y+N,Math.floor(1e3*a)/1e3);l.addColorStop(0,"rgba(0,0,0,1)"),l.addColorStop(n,"rgba(0,0,0,.95)"),l.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=l,e.globalCompositeOperation="destination-out",e.fillRect(s-a+G,y-a+N,2*a,2*a),v.drawImage(t,0,0)}(),Pt(),1===D?((l=Math.sqrt(Math.pow(r-(a+F.x),2)+Math.pow(i-(n+F.y),2)))<50?(e=5,It()):e=l<250?4:l<400?3:l<700?2:1,R!==e&&(c.setAttribute("data-level",e),R=e)):3===D&&(t=180*Math.atan2(n+xt.y-i,a+xt.x-r)/Math.PI-14,d.style.transform="rotate("+t+"deg)",r>=a+xt.x-xt.w/2&&r<=a+xt.x+xt.w/2&&i>=n+xt.y+25&&function(){O&&(D=4,At());qt()}())}function Ct(){var t=U;U=new Date,B=U-t,requestAnimationFrame(Ct),Lt()}function qt(){D=1,H=!1,a=-50,n=-50,o=!1,r=0,i=0,s=0,S=100,L=100,C=!0,q=!1,A=0,T=100,t=[{x:80,y:280},{x:50,y:700},{x:640,y:690},{x:450,y:30},{x:980,y:520},{x:700,y:850},{x:480,y:980},{x:720,y:450},{x:620,y:140}]}function At(){document.body.classList.add("pause"),e=!0;var t="Ok...<br>\n        I'm here, alone, with my phone, offline.<br>\n        I have to find network using my <b>phone signal</b><br>\n        <br>\n        Nothing broken, I can <b>move</b> (arrows, ZQSD, WASD),<br>\n        or <b>sprint</b> (shift, controlled by my health app)<br>\n        I can use  my <b>Flashlight</b> (F, or click on the app)<br><br>\n        I've seen some shadows moving, they seems to be attracted by light, I should avoid them,<br>\n        or detect thame using my <b>camera flash</b> (sapcebar, or click on the app)";2===D&&(t="I've found network!<br>I have to <b>type</b> my message quickly before signal disappear! (use keyboard to rewrite text)"),3===D&&(t=O?"I've send my message! When I'll have left that floor I'll be free!":"Damn! Not enough signal to send my message.",t+="<br>I have to use my <b>compass</b> to find the exit, pointing in blue direction"),4===D&&(t="Congratulations!<br> You are now free, and can go back online!<br><br>Thank you for playing!"),l("text").innerHTML=t}l("phone-light").onclick=(()=>{H=!H}),l("phone-camera").onclick=(()=>{St()}),document.onkeydown=function(t){var a=t.keyCode,n=t.key.toLowerCase();if(e)13===a&&function(){4!==D&&(document.body.classList.remove("pause"),e=!1);2===D&&kt();3===D&&(document.body.classList.remove("phase-text"),document.body.classList.add("phase-compass"))}();else if(2===D){!function(t){var e=l("text").querySelector(".current");t.toLowerCase()===e.getAttribute("data-val").toLowerCase()&&(e.classList.remove("current"),e.classList.add("checked"),e.nextElementSibling?e.nextElementSibling.classList.add("current"):++E<lt.length?Mt():(O=!0,clearInterval(P),It()))}(t.key);var r=l("iphone-keyboard").querySelector('button[data-char="'+t.key.toUpperCase()+'"');r&&r.classList.add("active")}else 39===a||"d"===n?$=1:37!==a&&"q"!==n&&"a"!==n||(Q=-1,W=1),38===a||"z"===n||"w"===n?z=1:40!==a&&"s"!==n||(K=1),0===Q&&0===Y||(x.classList.add(t.shiftKey?"sprinting":"moving"),t.shiftKey&&(C||L>ot)&&(o=!0))},document.onkeypress=function(t){2===D||e||("f"===t.key.toLowerCase()&&(H=!H),32===t.keyCode&&St())},document.onkeyup=function(t){var e=t.keyCode,a=t.key.toLowerCase();if(39===e||"d"===a?$=0:37!==e&&"q"!==a&&"a"!==a||(W=0),38===e||"z"===a||"w"===a?z=0:40!==e&&"s"!==a||(K=0),t.shiftKey||(o=!1),x.classList.remove("moving","sprinting"),2===D){var n=l("iphone-keyboard").querySelector('button[data-char="'+t.key.toUpperCase()+'"');n&&n.classList.remove("active")}},window.addEventListener("resize",function(t){ct()}),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,window.onload=function(){Ct()},qt(),ct(),dt(),pt=l("iphone-keyboard"),bt="",["QWERTYUIOP","ASDFGHJKL","ZXCVBNM,.'"].forEach(t=>{bt+="<li>";for(var e=0;e<t.length;++e)bt+=`<button type="button" data-char="${t.charAt(e)}">${t.charAt(e)}</button>`;bt+="</li>"}),bt+='<li>\n        <button type="button" class="space" data-char=" ">space</button>\n    </li>',pt.innerHTML=bt,function(){(y=document.createElement("canvas")).width=50,y.height=50;var t=y.getContext("2d");t.fillStyle="#A42",t.beginPath(),t.arc(25,25,10,.75*Math.PI,2.25*Math.PI,!1),t.fill(),t.fillStyle="#feab75",t.globalCompositeOperation="source-atop",t.beginPath(),t.arc(18.5,31,7,0,2*Math.PI,!1),t.arc(31.5,31,7,0,2*Math.PI,!1),t.fill(),t.globalCompositeOperation="source-over",t.beginPath(),t.arc(25,33,3,0,2*Math.PI,!1),t.fill(),t.fillStyle="#fff",t.beginPath(),t.arc(20,30,2,0,2*Math.PI,!1),t.arc(30,30,2,0,2*Math.PI,!1),t.fill(),t.fillStyle="#77F",t.beginPath(),t.arc(20,32,1,0,2*Math.PI,!1),t.arc(30,32,1,0,2*Math.PI,!1),t.fill(),t.strokeStyle="#A42",t.lineWidth=1,t.beginPath(),t.arc(20,30,2,1.2*Math.PI,1.8*Math.PI,!1),t.stroke(),t.beginPath(),t.arc(30,30,2,1.2*Math.PI,1.8*Math.PI,!1),t.stroke()}(),At()}();</script></body></html>